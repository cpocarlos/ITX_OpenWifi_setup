<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>OpenWiFi Inditex profile installation</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <h1>Detectando su dispositivo...</h1>
    <p>Redirigiendo a la descarga de perfil acorde a su dispositivo.</p>

    <script>
        /**
         *  L贸gica de Redirecci贸n Basada en User-Agent
         */

        // 1. URLs de destino
        const URL_ANDROID = "https://api.inditex.com/openroamin/openroaming/v1/certificate?cadena=zara&platform=android";
        // NOTA: Esta URL usa el esquema 'ms-settings' y debe estar codificada.
        const URL_WINDOWS = "ms-settings:wifi-provisioning?uri=http%3A%2F%2Fapi.inditex.com%2Fopenroamin%2Fopenroaming%2Fv1%2Fcertificate%3Fcadena%3Dzara%26platform%3Dwindows";
        const URL_IOS = "https://www.zara.com/openwifi/";
        const URL_DEFAULT = "https://splash.dnaspaces.eu/s/6881/Home";

        // 2. Obtener el User Agent (lo convertimos a min煤sculas para una coincidencia insensible a may煤sculas)
        const userAgent = navigator.userAgent.toLowerCase();
        let urlDestino = URL_DEFAULT;

        // 3. Detecci贸n de Plataforma
        
        // Detecci贸n de Android (incluye m贸viles y tabletas)
        if (userAgent.includes('android')) {
            urlDestino = URL_ANDROID;
        
        // Detecci贸n de iOS (iPhone, iPad, iPod)
        // Usamos una comprobaci贸n adicional para iPad moderno que podr铆a no tener 'iPad' en el User-Agent.
        } else if (
            userAgent.includes('iphone') || 
            userAgent.includes('ipad') || 
            (userAgent.includes('Macintosh') )
        ) {
            urlDestino = URL_IOS;
        
        // Detecci贸n de Windows (escritorio y tabletas)
        } else if (userAgent.includes('windows')) {
            urlDestino = URL_WINDOWS;
        }

        // 4. Redirecci贸n final
        
        // Usamos window.location.replace() en lugar de window.location.href para evitar que la p谩gina de 
        // redirecci贸n se guarde en el historial del navegador. Esto es m谩s limpio para el usuario.
        window.location.replace(urlDestino);

        // Opcionalmente, para depuraci贸n:
        // console.log("User Agent detectado:", userAgent);
        // console.log("Redirigiendo a:", urlDestino);

    </script>
</body>
</html>
